@{
    ViewData["Title"] = "Ticket Search Page";

    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Ticket Search Page</title>
    <link href="~/lib/font-awesome/css/all.css" rel="stylesheet" />
    <link href="~/lib/font-awesome/css/all.min.css" rel="stylesheet" />
    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.full.js"></script>
    <script src="~/lib/chosen/chosen.jquery.min.js"></script>
    <link href="~/chosen/chosen.css" rel="stylesheet" />
    <link href="~/chosen/chosen.min.css" rel="stylesheet" />
    <link href="~/select2/css/select2.css" rel="stylesheet" />
    <link href="~/select2/css/select2.min.css" rel="stylesheet" />
    <script src="~/select2/js/select2.full.js"></script>
    <script src="~/select2/js/select2.full.min.js"></script>
    <script src="~/select2/js/select2.js"></script>
    <script src="~/select2/js/select2.min.js"></script>
</head>
<body>
    <div style="min-width: 320px; min-height: 1070px">
        <div style="min-width: 320px; min-height: 120px; background-color:#2F4EB4">
        </div>
        <div style="min-width: 320px; min-height: 1035px; background-color:#F8F8F8">
            <div style="height:90px"></div>
            <form id="myForm" method="post" action="@Url.Action("TicketListView", "Home")">
                @Html.Partial("_LocationPartial", new PartialLocationModel { locationId = "currentBusLocation", locationText = "currentBusLocationText" })
                @Html.Partial("_ChangeLocationBusPartial")
                @Html.Partial("_LocationPartial", new PartialLocationModel { locationId = "destinationLocation", locationText = "destinationLocationText" })
                <div style="height:60px;"></div>
                @Html.Partial("_DatePartial")
                <div style="margin-top: 10px;">
                    <button type="button" id="todayBtn" style="display: block; margin-top: 5px">Bugün</button>
                    <button type="button" id="tomorrowBtn" style="display: block; margin-top: 5px">Yarın</button>
                </div>
                <div style="height:60px;"></div>
                <button id="submitButton" type="submit" style="margin-left:165px; margin-right:165px; width:620px; text-align: center; font-size:50px; height:120px; background-color:#2F4EB4; color:#FFFFFF">Bileti Bul</button>
            </form>
        </div>
        <div style="height:30px"></div>
        <div style="marginm-left:90px; margin-rigth:60px; overflow-y: scroll; max-height:525px">
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, cons ectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, cons ectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, cons ectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blan</p>
        </div>
    </div>
</body>

<script>
    $(document).ready(function () {
        $("#currentBusLocation").select2();

    });
    $(document).ready(function () {
        $("#destinationLocation").select2();

    });

    var formData = JSON.parse(localStorage.getItem('formData'));
    if (formData) {

        document.getElementById("currentBusLocation").value = formData.currentBusLocationId;
        document.getElementById("currentBusLocationText").value = formData.currentBusLocationText;
        document.getElementById("destinationLocation").value = formData.destinationLocationId;
        document.getElementById("destinationLocationText").value = formData.destinationLocationText;
        document.getElementById("date").value = formData.date;

    }
</script>
<script>
    $(document).ready(function () {
        document.getElementById('todayBtn').addEventListener('click', function (event) {
            event.preventDefault();
            setDate('today');
        });

        document.getElementById('tomorrowBtn').addEventListener('click', function (event) {
            event.preventDefault();
            setDate('tomorrow');
        });

        function setDate(type) {
            var currentDate = new Date();
            var dateInput = document.getElementById('date');

            if (type === 'today') {
                var today = currentDate.toISOString().slice(0, 10);
                dateInput.value = today;
            } else if (type === 'tomorrow') {
                var tomorrow = new Date(currentDate);
                tomorrow.setDate(currentDate.getDate() + 1);
                var tomorrowFormatted = tomorrow.toISOString().slice(0, 10);
                dateInput.value = tomorrowFormatted;
            }
        }
        $('#submitButton').click(function (e) {
            e.preventDefault();
            var selectedDate = $('#date').val();
            if (!selectedDate) {
                alert("Lütfen bir tarih seçin.");
                return;
            }

            var currentDate = new Date().toISOString().split('T')[0];
            if (selectedDate < currentDate) {
                alert("Seçilen tarih bugünden küçük olamaz.");
                return;
            }

            var currentLocation = $('#currentBusLocation').val();
            var destinationLocation = $('#destinationLocation').val();

            if (currentLocation === destinationLocation) {
                alert("Nereden ve Nereye alanları aynı olamaz.");
                return;
            }

            var formData = {
                currentBusLocationId: document.getElementById("currentBusLocation").value,
                currentBusLocationText: document.getElementById("currentBusLocationText").value,
                destinationLocationId: document.getElementById("destinationLocation").value,
                destinationLocationText: document.getElementById("destinationLocationText").value,
                date: document.getElementById("date").value

            };

            localStorage.setItem('formData', JSON.stringify(formData));

            $('#myForm').submit();

        });
    });
</script>
<script>
    $(document).ready(function () {
        $('#currentBusLocation').on('change', function () {
            // Seçili değeri al
            var selectedOptionText = $('#currentBusLocation option:selected').text();
            // Dropdown 2'ye ata
            $('#currentBusLocationText').val(selectedOptionText);
        }).trigger('change');
        $('#destinationLocation').on('change', function () {
            // Seçili değeri al
            var selectedOptionText = $('#destinationLocation option:selected').text();
            // Dropdown 2'ye ata
            $('#destinationLocationText').val(selectedOptionText);
        }).trigger('change');
        $("#changeLocationsButton").click(function (e) {
            var currentBusLocationValue = $("#currentBusLocation").val();
            var destinationLocationValue = $("#destinationLocation").val();

            // Değerleri değiştir
            $("#currentBusLocation").val(destinationLocationValue).trigger("change");
            $("#destinationLocation").val(currentBusLocationValue).trigger("change");

            e.preventDefault();
        });
    });
</script>
<script>

</script>
</html>


